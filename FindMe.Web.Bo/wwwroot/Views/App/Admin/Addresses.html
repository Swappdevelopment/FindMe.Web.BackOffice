

<div id="addressesVw">

    <script type="text/ng-template" id="addressEditorModal.html">

        <div class="modal-header">

            <div>
                <h3 class="findme-color-fc-pink">{{((vm.address.recordState && vm.address.recordState === 10) ? vm.appProps.lbl_NwAddr : vm.appProps.lbl_Edit + ' ' + vm.address.name)}}</h3>
            </div>

        </div>

        <div class="modal-body" id="modal-body">

            <div class="address-container" ng-class="vm.showAddTags ? 'disable-overflow' : ''">

                <form class="editor-frm">

                    <div class="row">
                        <div class="form-group col-lg-6 col-md-6 col-sm-12 col-xs-12">
                            <label class="control-label"><b>{{vm.appProps.lbl_Name}}</b></label>
                            <input placeholder="{{vm.appProps.lbl_Name}}" type="text" class="form-control no-animate" ng-model="vm.address.name">
                        </div>
                        <div class="form-group col-lg-6 col-md-6 col-sm-12 col-xs-12">
                            <label class="control-label"><b>{{vm.appProps.lbl_Slug}}</b></label>
                            <input placeholder="{{vm.appProps.lbl_Slug}}" type="text" class="form-control no-animate" ng-model="vm.address.slug">
                        </div>
                    </div>

                    <br />

                    <div class="row">
                        <div class="form-group col-lg-6 col-md-6 col-sm-12 col-xs-12">
                            <label class="control-label"><b>{{vm.appProps.lbl_Clnt}}</b></label>

                            <select class="form-control"
                                    ng-model="vm.address.client"
                                    ng-options="client.name for client in vm.clients | orderBy:'name'"></select>
                        </div>
                        <div class="form-group col-lg-6 col-md-6 col-sm-12 col-xs-12">
                            <label class="control-label"><b>{{vm.appProps.lbl_Category}}</b></label>

                            <select class="form-control"
                                    ng-model="vm.address.category"
                                    ng-options="category.name for category in vm.categorys"></select>
                        </div>
                    </div>

                    <div class="row">
                        <div class="form-group col-lg-6 col-md-6 col-sm-12 col-xs-12">
                            <label class="control-label"><b>{{vm.appProps.lbl_City}}</b></label>

                            <select class="form-control"
                                    ng-model="vm.address.cityDetail"
                                    ng-options="cityDetail.name for cityDetail in vm.cityDetails | orderBy:'name'"></select>
                        </div>
                    </div>

                    <br />

                    <div class="row">
                        <div class="form-group col-lg-6 col-md-6 col-sm-12 col-xs-12">
                            <label class="control-label"><b>{{vm.appProps.lbl_Lat}}</b></label>
                            <input placeholder="{{vm.appProps.lbl_Lat}}" type="number" class="form-control three-quarter no-animate" ng-model="vm.address.latitude">
                        </div>
                        <div class="form-group col-lg-6 col-md-6 col-sm-12 col-xs-12">
                            <label class="control-label"><b>{{vm.appProps.lbl_Lon}}</b></label>
                            <input placeholder="{{vm.appProps.lbl_Lon}}" type="number" class="form-control no-animate" ng-model="vm.address.longitude">
                        </div>
                    </div>

                    <br />
                    <hr />

                </form>

                <div ng-show="vm.address.id > 0">

                    <div class="row">
                        <div class="form-group col-lg-12 col-md-12 col-sm-12 col-xs-12">

                            <div>
                                <span class="bold-text bigger findme-color-fc-pink">{{vm.appProps.lbl_Logos}}</span>

                                <button type="button" class="btn btn-findme btn-xs no-outline" ng-click="vm.addLogo()"><span class="fa fa-plus-square"></span></button>
                            </div>

                            <table class="table data table-striped table-hover images" ng-show="vm.address.logos && vm.address.logos.length > 0">
                                <thead>
                                    <tr>
                                        <td></td>
                                        <td>
                                            <b>{{vm.appProps.lbl_Prvw}}</b>
                                        </td>
                                        <td></td>
                                        <td>
                                            <b>{{vm.appProps.lbl_Name}}</b>
                                        </td>
                                        <td class="text-center">
                                            <b>{{vm.appProps.lbl_IsDef}}</b>
                                        </td>
                                        <td>
                                            <b>{{vm.appProps.lbl_Format}}</b>
                                        </td>
                                        <td>
                                            <b>{{vm.appProps.lbl_ImgAlt}}</b>
                                        </td>
                                        <td>
                                            <b>{{vm.appProps.lbl_Desc}}</b>
                                        </td>
                                        <td class="text-center">
                                            <b>{{vm.appProps.lbl_Actv}}</b>
                                        </td>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="logo in vm.address.logos" ng-class="logo.recordState === 30 ? 'inDeleteMode' : ''">
                                        <td>
                                            <div class="btn-toolbar">
                                                <button ng-click="vm.markRowForDeletion(logo, vm.address.logos)" title="{{vm.appProps.msg_MrkForDltn}}" type="button" class="btn btn-findme btn-xs no-animate">
                                                    <span class="fa" ng-class="logo.recordState === 30 ? 'fa-ban' : 'fa-trash'"></span>
                                                </button>
                                                <button ng-click="vm.revertFile(logo)" type="button" class="btn btn-findme btn-xs no-animate" title="{{vm.appProps.lbl_Revert}}" ng-disabled="!logo.recordState || logo.recordState === 0 || logo.recordState === 10">
                                                    <span class="fa fa-undo"></span>
                                                </button>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="img-preview-container">
                                                <a class="img-preview" href="" target="_blank" ng-href="{{logo.id > 0 && !logo.waitingUpload ? logo.url : ''}}">
                                                    <div class="grp">
                                                        <img width="60" height="60"
                                                             ng-show="logo.id > 0 && !logo.waitingUpload"
                                                             ng-src="{{logo.thumbUrl ? logo.thumbUrl : '/images/no-image.png'}}"
                                                             alt="{{logo.alt}}" />
                                                        <img class="local" width="60" height="60"
                                                             ng-show="logo.id <= 0 || logo.waitingUpload"
                                                             src=""
                                                             alt="{{logo.alt}}" />
                                                    </div>
                                                </a>
                                            </div>
                                        </td>
                                        <td>
                                            <form ng-hide="logo.recordState === 30" class="inline-element img-upload" method="post" enctype="multipart/form-data">
                                                <button type="button" class="btn btn-findme btn-sm upload"
                                                        ng-click="vm.uploadImgClick($event, logo)"
                                                        title="{{logo.waitingUpload ? vm.appProps.lbl_Cancel : vm.appProps.msg_AddRplcLogo}}">
                                                    <span class="fa" ng-class="logo.waitingUpload ? 'fa-ban' : 'fa-upload'"></span>
                                                </button>
                                                <input type="file" class="hidden" name="file-{{$index}}" data-index="{{$index}}" />
                                            </form>
                                        </td>
                                        <td>
                                            <input class="form-control" ng-disabled="logo.recordState === 30" ng-model="logo.name" ng-change="vm.checkFilesRecordState(logo)" />
                                        </td>
                                        <td class="text-center">
                                            <span class="check-box">
                                                <input type="checkbox" value="None" id="addrLogoDefault-{{$index}}" name="addrLogoDefault-{{$index}}" ng-change="vm.fileSetToDefault(logo, vm.address.logos)" ng-model="logo.isDefault" ng-disabled="logo.recordState === 30" />
                                                <label class="lbl-chkb" for="addrLogoDefault-{{$index}}"></label>
                                            </span>
                                        </td>
                                        <td>
                                            <span>{{logo.format}}</span>
                                        </td>
                                        <td>
                                            <input class="form-control" ng-disabled="logo.recordState === 30" ng-model="logo.alt" ng-change="vm.checkFilesRecordState(logo)" />
                                        </td>
                                        <td>
                                            <textarea class="form-control" ng-disabled="logo.recordState === 30" ng-model="logo.desc" ng-change="vm.checkFilesRecordState(logo)"></textarea>
                                        </td>
                                        <td class="text-center">
                                            <!--<span class="fa fa-2x no-animate" ng-hide="logo.inEditMode" ng-class="logo.active ? 'fa-check text-success' : 'fa-times text-danger'"></span>-->

                                            <span class="check-box">
                                                <input type="checkbox" value="None" id="addrLogoActive-{{$index}}" name="addrLogoActive-{{$index}}" ng-change="vm.checkFilesRecordState(logo)" ng-model="logo.active" ng-disabled="logo.recordState === 30" />
                                                <label class="lbl-chkb" for="addrLogoActive-{{$index}}"></label>
                                            </span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                        </div>
                    </div>

                    <br />
                    <hr />
                </div>

                <div ng-show="vm.address.id > 0">

                    <div class="row">
                        <div class="form-group col-lg-12 col-md-12 col-sm-12 col-xs-12">

                            <div>
                                <span class="bold-text bigger findme-color-fc-pink">{{vm.appProps.lbl_Imgs}}</span>

                                <button type="button" class="btn btn-findme btn-xs no-outline" ng-click="vm.addImage()"><span class="fa fa-plus-square"></span></button>
                            </div>

                            <table class="table data table-striped table-hover images" ng-show="vm.address.images && vm.address.images.length > 0">
                                <thead>
                                    <tr>
                                        <td></td>
                                        <td>
                                            <b>{{vm.appProps.lbl_Prvw}}</b>
                                        </td>
                                        <td></td>
                                        <td>
                                            <b>{{vm.appProps.lbl_Name}}</b>
                                        </td>
                                        <td class="text-center">
                                            <b>{{vm.appProps.lbl_IsDef}}</b>
                                        </td>
                                        <td>
                                            <b>{{vm.appProps.lbl_Format}}</b>
                                        </td>
                                        <td>
                                            <b>{{vm.appProps.lbl_ImgAlt}}</b>
                                        </td>
                                        <td>
                                            <b>{{vm.appProps.lbl_Desc}}</b>
                                        </td>
                                        <td class="text-center">
                                            <b>{{vm.appProps.lbl_Actv}}</b>
                                        </td>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="img in vm.address.images" ng-class="img.recordState === 30 ? 'inDeleteMode' : ''">
                                        <td>
                                            <div class="btn-toolbar">
                                                <button ng-click="vm.markRowForDeletion(img, vm.address.images)" title="{{vm.appProps.msg_MrkForDltn}}" type="button" class="btn btn-findme btn-xs no-animate">
                                                    <span class="fa" ng-class="img.recordState === 30 ? 'fa-ban' : 'fa-trash'"></span>
                                                </button>
                                                <button ng-click="vm.revertFile(img)" type="button" class="btn btn-findme btn-xs no-animate" title="{{vm.appProps.lbl_Revert}}" ng-disabled="!img.recordState || img.recordState === 0 || img.recordState === 10">
                                                    <span class="fa fa-undo"></span>
                                                </button>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="img-preview-container">
                                                <a class="img-preview" href="" target="_blank" ng-href="{{img.id > 0 && !img.waitingUpload ? img.url : ''}}">
                                                    <div class="grp">
                                                        <img width="60" height="60"
                                                             ng-show="img.id > 0 && !img.waitingUpload"
                                                             ng-src="{{img.thumbUrl ? img.thumbUrl : '/images/no-image.png'}}"
                                                             alt="{{img.alt}}" />
                                                        <img class="local" width="60" height="60"
                                                             ng-show="img.id <= 0 || img.waitingUpload"
                                                             src=""
                                                             alt="{{img.alt}}" />
                                                    </div>
                                                </a>
                                                <!--<span ng-show="img.waitingUpload" class="fa fa-save" title="{{vm.appProps.msg_RqrsSave}}"></span>-->
                                            </div>
                                        </td>
                                        <td>
                                            <form ng-hide="img.recordState === 30" class="inline-element img-upload" method="post" action="/ApiAddress/UploadAddressImage" enctype="multipart/form-data">
                                                <button type="button" class="btn btn-findme btn-sm upload"
                                                        ng-click="vm.uploadImgClick($event, img)"
                                                        title="{{img.waitingUpload ? vm.appProps.lbl_Cancel : vm.appProps.msg_AddRplcImg}}">
                                                    <span class="fa" ng-class="img.waitingUpload ? 'fa-ban' : 'fa-upload'"></span>
                                                </button>
                                                <input type="file" class="hidden" name="file-{{$index}}" data-index="{{$index}}" />
                                            </form>
                                        </td>
                                        <td>
                                            <input class="form-control" ng-disabled="img.recordState === 30" ng-model="img.name" ng-change="vm.checkFilesRecordState(img)" />
                                        </td>
                                        <td class="text-center">
                                            <span class="check-box">
                                                <input type="checkbox" value="None" id="addrImgDefault-{{$index}}" name="addrImgDefault-{{$index}}" ng-change="vm.fileSetToDefault(img, vm.address.images)" ng-model="img.isDefault" ng-disabled="img.recordState === 30" />
                                                <label class="lbl-chkb" for="addrImgDefault-{{$index}}"></label>
                                            </span>
                                        </td>
                                        <td>
                                            <span>{{img.format}}</span>
                                        </td>
                                        <td>
                                            <input class="form-control" ng-disabled="img.recordState === 30" ng-model="img.alt" ng-change="vm.checkFilesRecordState(img)" />
                                        </td>
                                        <td>
                                            <textarea class="form-control" ng-disabled="img.recordState === 30" ng-model="img.desc" ng-change="vm.checkFilesRecordState(img)"></textarea>
                                        </td>
                                        <td class="text-center">
                                            <!--<span class="fa fa-2x no-animate" ng-hide="img.inEditMode" ng-class="img.active ? 'fa-check text-success' : 'fa-times text-danger'"></span>-->

                                            <span class="check-box">
                                                <input type="checkbox" value="None" id="addrImgActive-{{$index}}" name="addrImgActive-{{$index}}" ng-change="vm.checkFilesRecordState(img)" ng-model="img.active" ng-disabled="img.recordState === 30" />
                                                <label class="lbl-chkb" for="addrImgActive-{{$index}}"></label>
                                            </span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                        </div>
                    </div>

                    <br />
                    <hr />
                </div>

                <div ng-show="vm.address.id > 0">

                    <div class="row">
                        <div class="form-group col-lg-12 col-md-12 col-sm-12 col-xs-12">

                            <div>
                                <span class="bold-text bigger findme-color-fc-pink">{{vm.appProps.lbl_Documents}}</span>

                                <button type="button" class="btn btn-findme btn-xs no-outline" ng-click="vm.addDoc()"><span class="fa fa-plus-square"></span></button>
                            </div>

                            <table class="table data table-striped table-hover images" ng-show="vm.address.documents && vm.address.documents.length > 0">
                                <thead>
                                    <tr>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td>
                                            <b>{{vm.appProps.lbl_Name}}</b>
                                        </td>
                                        <td>
                                            <b>{{vm.appProps.lbl_Format}}</b>
                                        </td>
                                        <td>
                                            <b>{{vm.appProps.lbl_ImgAlt}}</b>
                                        </td>
                                        <td>
                                            <b>{{vm.appProps.lbl_Desc}}</b>
                                        </td>
                                        <td class="text-center">
                                            <b>{{vm.appProps.lbl_Actv}}</b>
                                        </td>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="doc in vm.address.documents" ng-class="doc.recordState === 30 ? 'inDeleteMode' : ''">
                                        <td>
                                            <div class="btn-toolbar">
                                                <button ng-click="vm.markRowForDeletion(doc, vm.address.documents)" title="{{vm.appProps.msg_MrkForDltn}}" type="button" class="btn btn-findme btn-xs no-animate">
                                                    <span class="fa" ng-class="doc.recordState === 30 ? 'fa-ban' : 'fa-trash'"></span>
                                                </button>
                                                <button ng-click="vm.revertFile(doc)" type="button" class="btn btn-findme btn-xs no-animate" title="{{vm.appProps.lbl_Revert}}" ng-disabled="!doc.recordState || doc.recordState === 0 || doc.recordState === 10">
                                                    <span class="fa fa-undo"></span>
                                                </button>
                                            </div>
                                        </td>
                                        <td>
                                            <form ng-hide="doc.recordState === 30" class="inline-element img-upload" method="post" enctype="multipart/form-data">
                                                <button type="button" class="btn btn-findme btn-sm upload"
                                                        ng-click="vm.uploadImgClick($event, doc)"
                                                        title="{{doc.waitingUpload ? vm.appProps.lbl_Cancel : vm.appProps.msg_AddRplcDoc}}">
                                                    <span class="fa" ng-class="doc.waitingUpload ? 'fa-ban' : 'fa-upload'"></span>
                                                </button>
                                                <input type="file" class="hidden" name="file-{{$index}}" data-index="{{$index}}" />
                                            </form>
                                        </td>

                                        <td>
                                            <a href="" target="_blank" ng-href="{{doc.id > 0 && !doc.waitingUpload ? doc.url : ''}}">
                                                <span class="fa fa-file fa-2x"></span>
                                            </a>
                                        </td>

                                        <td>
                                            <input class="form-control" ng-disabled="doc.recordState === 30" ng-model="doc.name" ng-change="vm.checkFilesRecordState(doc)" />
                                        </td>
                                        <td>
                                            <span>{{doc.format}}</span>
                                        </td>
                                        <td>
                                            <input class="form-control" ng-disabled="doc.recordState === 30" ng-model="doc.alt" ng-change="vm.checkFilesRecordState(doc)" />
                                        </td>
                                        <td>
                                            <textarea class="form-control" ng-disabled="doc.recordState === 30" ng-model="doc.desc" ng-change="vm.checkFilesRecordState(doc)"></textarea>
                                        </td>
                                        <td class="text-center">
                                            <!--<span class="fa fa-2x no-animate" ng-hide="doc.inEditMode" ng-class="doc.active ? 'fa-check text-success' : 'fa-times text-danger'"></span>-->

                                            <span class="check-box">
                                                <input type="checkbox" value="None" id="addrDocActive-{{$index}}" name="addrDocActive-{{$index}}" ng-change="vm.checkFilesRecordState(doc)" ng-model="doc.active" ng-disabled="doc.recordState === 30" />
                                                <label class="lbl-chkb" for="addrDocActive-{{$index}}"></label>
                                            </span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                        </div>
                    </div>

                    <br />
                    <hr />
                </div>

                <div ng-show="vm.address.id > 0">

                    <div class="row">
                        <div class="form-group col-lg-12 col-md-12 col-sm-12 col-xs-12">

                            <div>
                                <span class="bold-text bigger findme-color-fc-pink">{{vm.appProps.lbl_OpenHrs}}</span>
                                <h6 class="findme-color-fc-pink">***&nbsp;{{vm.appProps.msg_Use24HrFrmt}}</h6>
                            </div>

                            <table class="table data table-striped table-hover images" ng-show="vm.address.openHours && vm.address.openHours.length > 0">
                                <thead>
                                    <tr>
                                        <td></td>
                                        <td>
                                            <b>{{vm.appProps.lbl_OpenTm}}</b>
                                        </td>
                                        <td>
                                            <b>{{vm.appProps.lbl_CloseTm}}</b>
                                        </td>
                                    </tr>
                                </thead>
                                <tbody ng-repeat="day in vm.address.openHours">
                                    
                                    <tr>
                                        <td colspan="3">
                                            <button type="button" class="btn btn-findme btn-xs no-outline" ng-click="vm.addOpenHours(day)"><span class="fa fa-plus-square"></span></button>
                                            &nbsp;
                                            &nbsp;
                                            <b>{{day.name}}</b>
                                        </td>
                                    </tr>

                                    <tr ng-repeat="dayRow in day.openHours" ng-class="dayRow.recordState === 30 ? 'inDeleteMode' : ''">
                                        <td>
                                            <div class="btn-toolbar">
                                                <button ng-click="vm.markRowForDeletion(dayRow, day.openHours)" title="{{vm.appProps.msg_MrkForDltn}}" type="button" class="btn btn-findme btn-xs no-animate">
                                                    <span class="fa" ng-class="dayRow.recordState === 30 ? 'fa-ban' : 'fa-trash'"></span>
                                                </button>
                                                <button ng-click="vm.revertDayRow(dayRow)" type="button" class="btn btn-findme btn-xs no-animate" title="{{vm.appProps.lbl_Revert}}" ng-disabled="!dayRow.recordState || dayRow.recordState === 0 || dayRow.recordState === 10">
                                                    <span class="fa fa-undo"></span>
                                                </button>
                                            </div>
                                        </td>
                                        <td>
                                            <div uib-timepicker mousewheel="false" ng-model="dayRow.timeFrom" ng-change="vm.timeFromChanged(dayRow)" hour-step="1" minute-step="1" show-meridian="false"></div>
                                        </td>
                                        <td>
                                            <div uib-timepicker mousewheel="false" ng-model="dayRow.timeTo" ng-change="vm.timeToChanged(dayRow)" hour-step="1" minute-step="1" show-meridian="false"></div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                        </div>
                    </div>

                    <br />
                    <hr />
                </div>

                <div ng-show="vm.address.id > 0">

                    <div class="row">
                        <div class="form-group col-lg-12 col-md-12 col-sm-12 col-xs-12">
                            <span class="bold-text bigger findme-color-fc-pink">
                                {{vm.appProps.lbl_Rating}}
                            </span>
                            &nbsp;
                            <span class="bold-text">
                                {{vm.address.rate}}
                            </span>

                            &nbsp;
                            &nbsp;

                            <span class="bold-text bigger findme-color-fc-pink">
                                {{vm.appProps.lbl_RatingCount}}
                            </span>
                            &nbsp;
                            <span class="bold-text">
                                {{vm.address.rateCount}}
                            </span>
                        </div>
                    </div>

                    <div class="row">
                        <div class="form-group col-lg-12 col-md-12 col-sm-12 col-xs-12">
                            <div>
                                <span class="bold-text findme-color-fc-pink">
                                    {{vm.appProps.lbl_Ovrds}}
                                </span>
                                <button type="button" class="btn btn-findme btn-xs no-outline" ng-click="vm.addRatingOverride()"><span class="fa fa-plus-square"></span></button>
                            </div>

                            <table class="table data table-striped table-hover" ng-show="vm.address.ratingOverrides && vm.address.ratingOverrides.length > 0">
                                <thead>
                                    <tr>
                                        <td></td>
                                        <td>
                                            <b>{{vm.appProps.lbl_From}}</b>
                                        </td>
                                        <td>
                                            <b>{{vm.appProps.lbl_To}}</b>
                                        </td>
                                        <td>
                                            <b>{{vm.appProps.lbl_Rating}}</b>
                                        </td>
                                        <td>
                                            <b>{{vm.appProps.lbl_RatingCount}}</b>
                                        </td>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="rt in vm.address.ratingOverrides" ng-class="rt.recordState === 30 ? 'inDeleteMode' : ''">
                                        <td>
                                            <button ng-hide="rt.recordState === 30" ng-click="vm.setRatingToDelete(rt)" type="button" class="btn btn-findme btn-xs no-animate">
                                                <span class="fa fa-trash"></span>
                                            </button>
                                            <button ng-show="rt.recordState === 30" ng-click="rt.recordState = rt.prevRecordState;" type="button" class="btn btn-findme btn-xs no-animate">
                                                <span class="fa fa-ban"></span>
                                            </button>
                                        </td>
                                        <td>
                                            <p class="input-group">
                                                <input type="text" class="form-control no-animate"
                                                       uib-datepicker-popup="{{vm.appProps.defaultDateFormat}}" ng-model="rt.fromDate" ng-disabled="rt.recordState === 30"
                                                       is-open="rt.isFromDateOpened" />
                                                <span class="input-group-btn">
                                                    <button type="button" class="btn btn-default" ng-click="rt.isFromDateOpened = true"><i class="glyphicon glyphicon-calendar"></i></button>
                                                </span>
                                            </p>
                                        </td>
                                        <td>
                                            <p class="input-group">
                                                <input type="text" class="form-control no-animate"
                                                       uib-datepicker-popup="{{vm.appProps.defaultDateFormat}}" ng-model="rt.toDate" ng-disabled="rt.recordState === 30"
                                                       is-open="rt.isToDateOpened" />
                                                <span class="input-group-btn">
                                                    <button type="button" class="btn btn-default" ng-click="rt.isToDateOpened = true"><i class="glyphicon glyphicon-calendar"></i></button>
                                                </span>
                                            </p>
                                        </td>
                                        <td>
                                            <input placeholder="{{vm.appProps.lbl_Rate}}" type="number" class="form-control three-quarter no-animate" ng-model="rt.value" ng-disabled="rt.recordState === 30">
                                        </td>
                                        <td>
                                            <input placeholder="{{vm.appProps.lbl_ClickCount}}" type="number" class="form-control three-quarter no-animate" ng-model="rt.clickCount" ng-disabled="rt.recordState === 30">
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                        </div>
                    </div>

                    <br />
                    <hr />
                </div>

                <div ng-show="vm.address.id > 0">

                    <span class="bold-text bigger findme-color-fc-pink">{{vm.appProps.lbl_Tags}}</span>
                    <button type="button" class="btn btn-findme btn-xs no-outline" ng-click="vm.openAddTags()">
                        <span class="fa fa-plus-square"></span>
                    </button>

                    <div class="tags-container container" ng-show="vm.address.tags && vm.address.tags.length > 0">

                        <ul>
                            <li ng-repeat="tg in vm.address.tags">

                                <button class="kywrd inline-element no-outline"
                                        ng-class="tg.recordState === 30 ? 'findme-color-bc-lightgray' : (tg.recordState === 10 ? 'findme-color-bc-green' : 'findme-color-bc-pink')"
                                        ng-click="vm.addressTagClick(tg)">

                                    <span class="fa fa-hashtag findme-color-fc-white"></span>
                                    &nbsp;
                                    <span class="findme-color-fc-white">{{tg.name}}</span>
                                    &nbsp;
                                    <span class="fa-container"
                                          ng-class="tg.recordState === 30 ? 'fa fa-ban findme-color-fc-lightgray' : (tg.recordState === 10 ? 'fa fa-ban findme-color-fc-green' : 'fa fa-trash findme-color-fc-pink')"></span>

                                </button>

                            </li>
                        </ul>

                    </div>

                </div>

                <div class="tripad-widget" ng-show="vm.address.id > 0">
                    <br />
                    <hr />

                    <span class="bold-text bigger findme-color-fc-pink">{{vm.appProps.lbl_TripAd}}</span>
                    &nbsp;
                    <span class="bold-text bigger findme-color-fc-pink">{{vm.appProps.lbl_CodeSnipet}}</span>

                    <div class="btn-toolbar">
                        <button type="button" class="btn btn-findme btn-sm no-animate"
                                title="{{vm.appProps.lbl_Revert}}" ng-click="vm.revertTripAd()"
                                ng-disabled="!vm.address.tripAdWidget.recordState || vm.address.tripAdWidget.recordState === 0 || vm.address.tripAdWidget.recordState === 10">
                            <span class="fa fa-undo"></span>
                        </button>
                        <button type="button" class="btn btn-findme btn-sm no-animate"
                                title="{{vm.appProps.lbl_Revert}}" ng-click="vm.deleteTripAd()"
                                ng-disabled="!vm.address.tripAdWidget.largeValue && !vm.address.tripAdWidget.smallValue">
                            <span class="fa fa-trash"></span>
                        </button>
                    </div>

                    <br />

                    <div ng-class="vm.address.tripAdWidget.recordState === 30 ? 'findme-color-bc-pinklight' : ''">

                        <div class="btn-toolbar hidden">
                            <button type="button" class="btn btn-lg btn-findme" ng-click="vm.tripadCode = true; vm.tripadPreview = false;" ng-class="vm.tripadCode ? 'toggle-on' : ''">{{vm.appProps.lbl_CodeSnipet}}</button>
                            <button type="button" class="btn btn-lg btn-findme" ng-click="vm.tripadPreview = true; vm.tripadCode = false;" ng-class="vm.tripadPreview ? 'toggle-on' : ''">{{vm.appProps.lbl_Prvw}}</button>
                        </div>

                        <br />
                        <div class="row">
                            <span class="bold-text col-lg-6 col-md-6 col-sm-12 col-xs-12">Desktop Widget</span>
                            <span class="bold-text col-lg-6 col-md-6 col-sm-12 col-xs-12">Mobile Widget</span>
                        </div>
                        <div class="row" ng-show="vm.tripadCode">
                            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                <textarea maxlength="500000" class="form-control" ng-model="vm.address.tripAdWidget.largeValue" ng-change="vm.checkTripAdWidget(vm.address.tripAdWidget)"></textarea>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                <textarea maxlength="500000" class="form-control" ng-model="vm.address.tripAdWidget.smallValue" ng-change="vm.checkTripAdWidget(vm.address.tripAdWidget)"></textarea>
                            </div>
                        </div>
                        <div class="row" ng-show="vm.tripadPreview">
                            <div class="prvw large col-lg-6 col-md-6 col-sm-12 col-xs-12" ng-bind-html="vm.address.tripAdWidget.trustLargeValue()">
                                
                            </div>
                            <div class="prvw small col-lg-6 col-md-6 col-sm-12 col-xs-12" ng-bind-html="vm.address.tripAdWidget.trustSmallValue()">
                                
                            </div>
                        </div>

                    </div>

                </div>

            </div>

        </div>

        <div class="modal-footer">
            <button class="btn btn-findme" type="button" ng-click="vm.save(vm.address)">
                <b>{{vm.appProps.lbl_Save}}</b>
            </button>
            <button class="btn btn-findme hollow" type="button" ng-click="vm.close()">
                <b>{{vm.appProps.lbl_Close}}</b>
            </button>
        </div>

        <div class="add-tags-bg no-animate" ng-show="vm.showAddTags" ng-click="vm.showAddTags = false">
            <div class="add-tags-container" ng-click="$event.stopPropagation()">

                <span class="wait no-animate fa fa-spinner fa-spin fa-4x findme-color-fc-pink" ng-show="vm.gettingAddTags"></span>

                <div class="no-animate" ng-show="!vm.gettingAddTags && vm.tags && vm.tags.length > 0">

                    <div class="form-group">
                        <div class="form-control no-animate">
                            <span class="fa fa-search fa-2x findme-color-fc-pink"></span>
                            <input type="text" placeholder="{{vm.appProps.msg_TpFltrKywrds}}" ng-model="vm.tagFilter">
                            <span ng-show="vm.tagFilter" class="fa fa-times fa-2x findme-color-fc-pink crsr-pointer" ng-click="vm.tagFilter = ''"></span>
                        </div>
                        <span class="findme-color-fc-pink">{{vm.appProps.lbl_KywrdsSltd}} {{vm.selectedTagCount}}</span>
                    </div>

                    <div class="overflow">
                        <div class="tags-container container">
                            <ul>
                                <li ng-repeat="tg in vm.tags" ng-show="tg.isVisible && !tg.isFilteredOut">
                                    <button class="kywrd inline-element no-outline"
                                            ng-class="tg.isSelected ? 'findme-color-bc-pink' : 'findme-color-bc-lightgray'"
                                            ng-click="vm.selectTag(tg)">
                                        <span class="fa fa-hashtag findme-color-fc-white"></span>
                                        &nbsp;
                                        <span class="findme-color-fc-white">{{tg.name}}</span>
                                        &nbsp;
                                        <span class="fa-container" ng-class="tg.isSelected ? 'fa fa-ban findme-color-fc-pink' : 'fa fa-plus findme-color-fc-lightgray'"></span>
                                    </button>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div class="btn-toolbar pull-right">
                        <button class="btn btn-findme" type="button" ng-click="vm.applyTags()">
                            <b>{{vm.appProps.lbl_Apply}}</b>
                        </button>
                        <button class="btn btn-findme hollow" type="button" ng-click="vm.showAddTags = false">
                            <b>{{vm.appProps.lbl_Cancel}}</b>
                        </button>
                    </div>
                </div>

            </div>
        </div>

    </script>

    <script type="text/ng-template" id="deleteAddressModal.html">
        <div class="modal-header">

            <div>
                <h3 class="findme-color-fc-pink">{{vm.appProps.lbl_Delete}} {{vm.address.name}}?</h3>
            </div>

        </div>
        <div class="modal-body" id="modal-body">
        </div>

        <div class="modal-footer">
            <button class="btn btn-findme" type="button" ng-click="vm.yes()">
                <b>{{vm.appProps.lbl_Yes}}</b>
            </button>
            <button class="btn btn-findme hollow" type="button" ng-click="vm.no()">
                <b>{{vm.appProps.lbl_No}}</b>
            </button>
        </div>
    </script>


    <div uib-collapse="!vm.showError" style="padding: 20px;">

        <div style="z-index: 5000;">
            <div uib-alert class="alert alert-danger" close="vm.showError = false;">
                <h4>
                    {{vm.errorstatus}}
                </h4>
                <p>
                    {{vm.errormsg}}
                </p>
            </div>
        </div>
    </div>


    <table class="pages col-sm-12 col-xs-12 no-animate" ng-hide="vm.isBusy">
        <tr>
            <td class="findme-color-fc-pink">
                <span>{{vm.appProps.lbl_Pg}}: {{vm.currentPgNmbr + 1}} {{vm.appProps.lbl_of}} {{vm.totalPgs}}</span>
                &nbsp;&nbsp;<b>{{vm.appProps.lbl_TtlRows}}: {{vm.addressesCount + vm.addressesCountMod}}</b>
            </td>
        </tr>
        <tr>
            <td>
                <ul class="pagination">

                    <li ng-repeat="pg in vm.pgsCollection" ng-class="(pg.isActive ? 'active' : '') + ' ' + (pg.disabled ? 'disabled' : '') + ' crsr-pointer'">
                        <a ng-class="(pg.isActive ? 'active' : '') + ' ' + (pg.disabled ? 'disabled' : '')" ng-click="vm.gotoPage(pg, true)">
                            <span class="{{pg.icon}} no-animate" ng-show="(pg.icon.length > 0)"></span><span>{{pg.text}}</span>
                        </a>
                    </li>
                </ul>
            </td>
        </tr>
    </table>


    <div class="main-table-container">
        <table class="table table-striped table-hover data" ng-init="vm.populateAddresses()">
            <thead>
                <tr>
                    <td class="col-md-1">
                        <b>{{vm.appProps.lbl_Actns}}</b>
                    </td>
                    <td>
                        <b>{{vm.appProps.lbl_ID}}</b>
                    </td>
                    <td>
                        <b>{{vm.appProps.lbl_Name}}</b>
                    </td>
                    <td>
                        <b>{{vm.appProps.lbl_Slug}}</b>
                    </td>
                    <td>
                        <b>{{vm.appProps.lbl_Clnt}}</b>
                    </td>
                    <td>
                        <b>{{vm.appProps.lbl_Category}}</b>
                    </td>
                    <td>
                        <b>{{vm.appProps.lbl_City}}</b>
                    </td>
                    <td class="text-center">
                        <b>{{vm.appProps.lbl_Lat}}</b>
                    </td>
                    <td class="text-center">
                        <b>{{vm.appProps.lbl_Lon}}</b>
                    </td>
                    <td class="text-center">
                        <b>{{vm.appProps.lbl_Rating}}</b>
                    </td>
                    <td class="text-center">
                        <b>{{vm.appProps.lbl_Ovrd}}</b>
                    </td>
                    <td class="text-center">
                        <b>{{vm.appProps.lbl_RatingCount}}</b>
                    </td>
                    <td class="text-center">
                        <b>{{vm.appProps.lbl_Ovrd}}</b>
                    </td>
                    <td class="text-center">
                        <b>{{vm.appProps.lbl_FbFans}}</b>
                    </td>
                    <td class="text-center">
                        <b>{{vm.appProps.lbl_Actv}}</b>
                    </td>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="address in vm.addresses">
                    <td>
                        <div class="btn-toolbar no-animate" ng-hide="address.gettingContent">
                            <button type="button" class="btn btn-findme action" title="{{vm.appProps.lbl_Edit}}" ng-click="vm.goInEditMode(address)"><span class="fa fa-edit"></span></button>
                            <button type="button" class="btn btn-findme hollow action" title="{{vm.appProps.lbl_Delete}}" ng-click="vm.deleteModal(address)"><span class="fa fa-trash"></span></button>
                        </div>

                        <div ng-show="address.gettingContent" class="fa fa-spinner fa-spin fa-2x findme-color-fc-pink no-animate"></div>

                    </td>
                    <td>
                        <b ng-show="address.id > 0" class="no-animate">{{address.id}}</b>
                    </td>
                    <td>
                        <span class="no-animate">{{address.name}}</span>
                    </td>
                    <td>
                        <span class="no-animate">{{address.slug}}</span>
                    </td>
                    <td>
                        <span class="no-animate">{{address.client.name}}</span>
                    </td>
                    <td>
                        <span class="no-animate">{{address.category.name}}</span>
                    </td>
                    <td>
                        <span class="no-animate">{{address.cityDetail.name}}</span>
                    </td>
                    <td class="text-center">
                        <span class="no-animate">{{address.latitude}}</span>
                    </td>
                    <td class="text-center">
                        <span class="no-animate">{{address.longitude}}</span>
                    </td>

                    <td class="text-center">
                        <span class="no-animate">{{address.rate}}</span>
                    </td>
                    <td class="text-center">
                        <span class="no-animate">{{address.rateOverride}}</span>

                        <!--<input ng-disabled="address.saving" placeholder="{{vm.appProps.lbl_Ovrd}}" type="number" class="form-control half no-animate" ng-model="address.rateOverride">-->
                    </td>
                    <td class="text-center">
                        <span class="no-animate">{{address.rateCount}}</span>
                    </td>
                    <td class="text-center">
                        <span class="no-animate">{{address.rateOverrideCount}}</span>

                        <!--<input ng-disabled="address.saving" placeholder="{{vm.appProps.lbl_Ovrd}}" type="number" class="form-control half no-animate" ng-model="address.rateOverrideCount">-->
                    </td>

                    <td class="text-center">
                        <span class="fa {{address.flgRecByFbFans ? 'fa-check text-success' : 'fa-times text-danger'}} fa-2x no-animate"></span>



                        <!--<span class="check-box no-animate">
                            <input ng-disabled="address.saving" type="checkbox" value="None" id="addressFbFans-{{address.id}}" name="addressFbFans-{{address.id}}" ng-model="address.flgRecByFbFans" />
                            <label class="lbl-chkb" for="addressFbFans-{{address.id}}"></label>
                        </span>-->
                    </td>
                    <td class="text-center">
                        <span class="fa {{address.active ? 'fa-check text-success' : 'fa-times text-danger'}} fa-2x no-animate"></span>

                        <!--<span class="check-box">
                            <input ng-disabled="address.saving" type="checkbox" value="None" id="addressActive-{{address.id}}" name="addressActive-{{address.id}}" ng-model="address.active" />
                            <label class="lbl-chkb" for="addressActive-{{address.id}}"></label>
                        </span>-->
                    </td>







                    <!--<td colspan="15" ng-if="address.link">

                        <div ng-hide="address.link.contentLoaded" class="wait-ctrl-container">
                            <div class="wait-ctrl">
                                <span class="fa fa-spinner fa-spin fa-3x findme-color-fc-pink no-animate"></span>
                            </div>
                        </div>

                        <div ng-show="address.link.contentLoaded">

                        </div>

                    </td>-->
                </tr>
                </
            </tbody>
        </table>
    </div>

    <table class="pages col-sm-12 col-xs-12 no-animate" ng-hide="vm.isBusy">
        <tr>
            <td>
                <ul class="pagination">

                    <li ng-repeat="pg in vm.pgsCollection" ng-class="(pg.isActive ? 'active' : '') + ' ' + (pg.disabled ? 'disabled' : '') + ' crsr-pointer'">
                        <a ng-class="(pg.isActive ? 'active' : '') + ' ' + (pg.disabled ? 'disabled' : '')" ng-click="vm.gotoPage(pg, true)">
                            <span class="{{pg.icon}} no-animate" ng-show="(pg.icon.length > 0)"></span><span>{{pg.text}}</span>
                        </a>
                    </li>
                </ul>
            </td>
        </tr>
    </table>

    <br />
    <br />
    <br />

    <div class="modal-container">

    </div>

    <div class="modal-editor">

    </div>

</div>